---
// Fetch the social data JSON file
const socialData = await fetch(new URL('data/social_data.json', Astro.url.origin).href).then(res => res.json());
const letterboxdData = socialData.letterboxd;

interface MovieReview {
	title: string;
	year: number;
	rating: number;
	watched_date: string;
	is_rewatch: boolean;
	review: string;
	image_url: string;
	link: string;
}

function getStarRating(rating: number): string {
	const fullStars = Math.floor(rating);
	const hasHalfStar = rating % 1 >= 0.5;
	
	return '★'.repeat(fullStars) + (hasHalfStar ? '½' : '');
}
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Noah Eisen</title>
		<meta name="description" content="Noah Eisen is an engineer based in San Francisco, focused on building creative tools, fast prototypes, and playful side projects." />
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const seeMoreButton = document.querySelector('.see-more-button');
				const moreMovies = document.getElementById('more-movies');
				
				if (seeMoreButton && moreMovies) {
					seeMoreButton.addEventListener('click', function() {
						if (moreMovies.classList.contains('hidden')) {
							moreMovies.classList.remove('hidden');
							seeMoreButton.textContent = 'Show less';
						} else {
							moreMovies.classList.add('hidden');
							seeMoreButton.textContent = 'See more of my recent movies';
						}
					});
				}
			});
		</script>
		<style>
			:root {
				--primary-color: #3b82f6;
				--accent-color: #10b981;
				--gold-color: #f59e0b;
				--text-color: #e5e7eb;
				--text-muted: #9ca3af;
				--background-color: #111827;
				--card-bg: #1f2937;
				--card-border: #374151;
				--link-color: #60a5fa;
				--link-hover-color: #93c5fd;
				--glow-color: rgba(59, 130, 246, 0.5);
			}

			body {
				margin: 0;
				padding: 0;
				min-height: 100vh;
				font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				background-color: var(--background-color);
				color: var(--text-color);
				line-height: 1.6;
			}

			.container {
				max-width: 900px;
				margin: 0 auto;
				padding: 2rem;
			}

			header {
				margin-bottom: 4rem;
				display: flex;
				align-items: center;
				gap: 3rem;
			}

			.header-content {
				flex: 1;
			}

			.profile-image-container {
				flex-shrink: 0;
				width: 200px;
				height: 200px;
				border-radius: 50%;
				overflow: hidden;
				border: 2px solid var(--primary-color);
				box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
			}

			.profile-image {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			h1 {
				font-size: 2.5rem;
				font-weight: 700;
				margin-bottom: 1rem;
				background: linear-gradient(to right, var(--primary-color), var(--accent-color));
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}

			h2 {
				font-size: 1.75rem;
				font-weight: 600;
				margin-bottom: 1.5rem;
				color: var(--text-color);
			}

			p {
				font-size: 1.1rem;
				margin-bottom: 1.5rem;
				color: var(--text-muted);
			}

			section {
				margin-bottom: 4rem;
			}

			.social-links {
				display: flex;
				gap: 1.5rem;
				margin-top: 1.5rem;
			}

			.social-link {
				color: var(--link-color);
				text-decoration: none;
				font-weight: 500;
				transition: all 0.2s ease;
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.social-link:hover {
				color: var(--link-hover-color);
				text-shadow: 0 0 8px var(--glow-color);
			}

			.career-highlights {
				display: grid;
				grid-template-columns: repeat(2, 1fr);
				gap: 2rem;
				margin-top: 1.5rem;
				max-width: 1200px;
				margin-left: auto;
				margin-right: auto;
			}

			.highlight-card {
				background-color: var(--card-bg);
				border: 1px solid var(--card-border);
				border-radius: 8px;
				padding: 1.5rem;
				transition: all 0.3s ease;
				display: flex;
				flex-direction: column;
			}

			.highlight-card h3 {
				font-size: 1.25rem;
				font-weight: 600;
				margin-bottom: 0.25rem;
				color: var(--primary-color);
			}

			.highlight-card .job-title {
				font-size: 1.1rem;
				font-weight: 500;
				margin-bottom: 0.25rem;
				color: var(--text-color);
			}

			.highlight-card .date-range {
				font-size: 0.9rem;
				color: var(--text-muted);
				margin-bottom: 0.75rem;
				font-style: italic;
			}

			.highlight-card p {
				font-size: 0.95rem;
				line-height: 1.6;
				margin-bottom: 0;
				color: var(--text-muted);
			}

			.highlight-card a {
				color: var(--text-muted);
				text-decoration: underline;
				text-decoration-thickness: 1px;
				text-underline-offset: 2px;
				transition: all 0.2s ease;
			}

			.highlight-card a:hover {
				color: var(--text-color);
				text-decoration-thickness: 2px;
			}

			.highlight-card:hover {
				transform: translateY(-3px);
				box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
			}

			.projects-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 1.5rem;
				margin-top: 1.5rem;
			}

			.project-card {
				background-color: var(--card-bg);
				border: 1px solid var(--card-border);
				border-radius: 8px;
				padding: 1.5rem;
				transition: all 0.3s ease;
				text-decoration: none;
				color: var(--text-color);
				display: block;
			}

			.project-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
				border-color: var(--primary-color);
			}

			.project-title {
				font-size: 1.25rem;
				font-weight: 600;
				margin-bottom: 0.5rem;
				color: var(--primary-color);
			}

			.project-description {
				font-size: 0.95rem;
				color: var(--text-muted);
			}

			#projects a {
				color: var(--link-color);
				text-decoration: none;
				font-weight: 500;
				transition: all 0.2s ease;
			}

			#projects a:hover {
				color: var(--link-hover-color);
				text-shadow: 0 0 8px var(--glow-color);
			}

			footer {
				text-align: center;
				margin-top: 4rem;
				padding-top: 2rem;
				border-top: 1px solid var(--card-border);
				color: var(--text-muted);
				font-size: 0.9rem;
			}

			@media (max-width: 768px) {
				.container {
					padding: 1.5rem;
				}

				header {
					flex-direction: column-reverse;
					text-align: center;
					gap: 2rem;
				}

				.profile-image-container {
					width: 150px;
					height: 150px;
				}

				.social-links {
					justify-content: center;
				}

				h1 {
					font-size: 2rem;
				}

				h2 {
					font-size: 1.5rem;
				}

				.career-highlights, .projects-grid {
					grid-template-columns: 1fr;
				}
			}

			@media (max-width: 900px) {
				.career-highlights {
					grid-template-columns: 1fr;
					gap: 1.5rem;
				}
			}

			#other-interests {
				margin-bottom: 4rem;
			}

			.interests-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
				gap: 2rem;
				margin-top: 1.5rem;
			}

			.interest-card {
				background-color: var(--card-bg);
				border: 1px solid var(--card-border);
				border-radius: 8px;
				padding: 1.5rem;
				transition: all 0.3s ease;
			}

			.interest-card h3 {
				font-size: 1.25rem;
				font-weight: 600;
				margin-bottom: 1rem;
				color: var(--primary-color);
			}

			.interest-card p {
				color: var(--text-muted);
			}

			.recent-movies {
				margin-top: 1rem;
				display: grid;
				grid-template-columns: 1fr;
				gap: 1.5rem;
			}

			.movie-card {
				margin-bottom: 0;
				padding: 1.5rem;
				border: 1px solid var(--card-border);
				border-radius: 8px;
				background-color: rgba(31, 41, 55, 0.5);
				display: flex;
				gap: 1rem;
				transition: all 0.3s ease;
			}

			.movie-card:hover {
				transform: translateY(-2px);
				box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);
				border-color: var(--primary-color);
			}

			.movie-card:last-child {
				margin-bottom: 0;
			}

			.movie-card img {
				width: 150px;
				height: 225px;
				border-radius: 4px;
				object-fit: cover;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
			}

			.movie-info {
				flex: 1;
				display: flex;
				flex-direction: column;
			}

			.movie-info h4 {
				margin: 0 0 0.25rem 0;
				font-size: 1.1rem;
				color: var(--text-color);
			}

			.rating {
				color: var(--gold-color);
				font-weight: bold;
				margin: 0;
				margin-bottom: 0.5rem;
				letter-spacing: 2px;
				line-height: 1;
			}

			.review {
				margin: -1rem 0rem 0rem 0rem;
				color: var(--text-muted);
				font-size: 0.95rem;
			}

			.review p {
				margin: 0;
			}

			.review em {
				font-style: italic;
			}

			.review strong {
				font-weight: bold;
			}

			.review a {
				color: var(--link-color);
				text-decoration: none;
				font-weight: 500;
				transition: all 0.2s ease;
			}

			.review a:hover {
				color: var(--link-hover-color);
				text-shadow: 0 0 8px var(--glow-color);
			}

			.watched-date {
				font-size: 0.75rem;
				color: var(--text-muted);
				opacity: 0.5;
				margin-top: 0.15rem;
				margin-bottom: 0.5rem;
				font-style: italic;
				letter-spacing: 0.5px;
				font-weight: 300;
			}

			.movie-link {
				color: var(--link-color);
				text-decoration: none;
				font-weight: 500;
				transition: all 0.2s ease;
				font-size: 0.9rem;
				margin-top: auto;
			}

			.movie-link:hover {
				color: var(--link-hover-color);
				text-shadow: 0 0 8px var(--glow-color);
			}

			.profile-separator {
				border: none;
				border-top: 1px solid var(--card-border);
				margin: 2rem 0;
				width: 50%;
				margin-left: auto;
				margin-right: auto;
			}

			.profile-link-container {
				text-align: center;
			}

			.profile-link {
				color: var(--link-color);
				text-decoration: none;
				font-weight: 500;
				transition: all 0.2s ease;
				display: inline-block;
			}

			.profile-link:hover {
				color: var(--link-hover-color);
				text-shadow: 0 0 8px var(--glow-color);
			}

			@media (max-width: 768px) {
				.interests-grid {
					grid-template-columns: 1fr;
				}

				.movie-card {
					flex-direction: column;
					align-items: flex-start;
				}

				.movie-card img {
					width: 100%;
					max-width: 200px;
					height: auto;
					aspect-ratio: 2/3;
				}

				.recent-movies {
					grid-template-columns: 1fr;
				}
			}

			.see-more-container {
				text-align: center;
				margin: 1.5rem 0;
			}

			.see-more-button {
				background: none;
				border: 1px solid var(--primary-color);
				color: var(--primary-color);
				padding: 0.5rem 1rem;
				border-radius: 4px;
				font-size: 0.9rem;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.2s ease;
			}

			.see-more-button:hover {
				background-color: var(--primary-color);
				color: var(--text-color);
			}

			.more-movies {
				margin-top: 1.5rem;
				display: grid;
				grid-template-columns: 1fr;
				gap: .75rem;
			}

			.hidden {
				display: none;
			}
		</style>
	</head>
	<body>
		<main class="container" role="main">
			<header>
				<div class="header-content">
					<h1>Noah Eisen</h1>
					<p>
						Hi, I'm Noah, an engineer based in San Francisco with a background in Computer 
						Science and Mathematics from the University of Michigan. Over the past decade, 
						I've led teams and shipped projects at companies like Google, Waymo, and 
						Faire. My experience spans infrastructure and product development, with a consistent 
						emphasis on clean code, maintainable systems, and thoughtful architecture.</p>
					<div class="social-links">
						<a href="https://github.com/ncteisen" class="social-link" tabindex="0" aria-label="GitHub Profile" target="_blank" rel="noopener noreferrer">
							GitHub
						</a>
						<a href="https://linkedin.com/in/ncteisen" class="social-link" tabindex="0" aria-label="LinkedIn Profile" target="_blank" rel="noopener noreferrer">
							LinkedIn
						</a>
						<a href="mailto:ncteisen@gmail.com" class="social-link" tabindex="0" aria-label="Email">
							Email
						</a>
						<a href="/resume.pdf" class="social-link" tabindex="0" aria-label="Resume PDF" target="_blank" rel="noopener noreferrer">
							Resume
						</a>
					</div>
				</div>
				<div class="profile-image-container">
					<img 
						src="/images/profile-placeholder.jpg" 
						alt="Noah Eisen" 
						class="profile-image"
						width="200"
						height="200"
					/>
				</div>
			</header>

			<section id="career">
				<h2>Career Snapshot</h2>
				<div class="career-highlights">
					<div class="highlight-card">
						<h3>Faire</h3>
						<div class="job-title">Staff Engineer</div>
						<div class="date-range">Feb 2022 - Present</div>
						<p>
							At Faire - a fast-moving, high-growth startup - I've worn many hats: hands-on engineer, 
							system architect, tech lead, and senior engineering manager. I've led platform work 
							across shipping, payments, and third-party integrations, delivering high-impact 
							features like multi-user account infrastructure, SQL-based invariant validation, 
							and guaranteed shipping pricing. I authored Faire's long-term technical vision 
							for shipping and oversaw complex service extractions in payments. Whether driving 
							strategy or writing critical path code, my focus has been on close patnership with 
							prodcut and building scalable systems that move fast without compromising on reliability.
						</p>
					</div>
					<div class="highlight-card">
						<h3>Waymo</h3>
						<div class="job-title">Senior Software Engineer</div>
						<div class="date-range">Feb 2019 - Feb 2022</div>
						<p>
							At Waymo, I was on the Fleet Infrastructure team, leading development of OpsApp, an 
							internal Android application used daily by over 1,000 safety drivers. I managed a 
							cross-functional team spanning engineering, product, UX, and operations, and drove 
							initiatives to ensure safety, speed, and reliability across the self-driving fleet. 
							I built systems to stream real-time telemetry with sub-300ms latency, integrated 
							compliance checklists directly into vehicle startup logic, and designed roadside 
							support tooling that enabled responders to locate vehicles within minutes of an 
							incident. I co-authored 
							<a href="https://patents.justia.com/patent/20230347937" target="_blank" rel="noopener noreferrer">
								a patent
							</a> 
							for my work on the subject.
						</p>
					</div>
					<div class="highlight-card">
						<h3>Google</h3>
						<div class="job-title">Software Engineer</div>
						<div class="date-range">Aug 2016 - Feb 2019</div>
						<p>
							I started my full-time career at Google as part of the gRPC team, contributing to core C, C++, 
							and Python libraries that power Google's internal and external services. I built 
							benchmarking and regression detection tools, helped migrate TensorFlow's distributed 
							runtime to gRPC, and gave a 
							<a href="https://www.youtube.com/watch?v=cWlXQP9AORo" target="_blank" rel="noopener noreferrer">
								tech talk at KubeCon on tuning RPC performance
							</a>.
						</p>
					</div>
					<div class="highlight-card">
						<h3>Bloomberg</h3>
						<div class="job-title">Software Engineering Intern</div>
						<div class="date-range">Summer 2015</div>
						<p>
							Full stack internship on the infrastructure team. Built internal tooling to help debug and kill
							processes running on production machines.
						</p>
					</div>
				</div>
			</section>

			<section id="projects">
				<h2>Side Projects</h2>
				<p>Newer projects coming soon! In the meantime, you can check out my <a href="/old">old website</a> for projects I made many years ago.</p>
				<div class="projects-grid">
					<a href="/projects/sarah-jumps" class="project-card" tabindex="0">
						<h3 class="project-title">Sarah Jumps</h3>
						<p class="project-description">Doodle jump inspired game I made to explore vibe coding.</p>
					</a>
					<a href="https://www.hypertextlibrary.com/" class="project-card" tabindex="0" target="_blank" rel="noopener noreferrer">
						<h3 class="project-title">The Hypertext Library</h3>
						<p class="project-description">Literature-based side project I made a decade ago after taking a class on Ulysses.</p>
					</a>
					<a href="/old/projects/p1/" class="project-card" tabindex="0">
						<h3 class="project-title">Room Game</h3>
						<p class="project-description">Simple text-based game I made in college to teach myself JavaScript.</p>
					</a>
				</div>
			</section>

			<section id="other-interests">
				<h2>Other Interests</h2>
				<div class="interests-grid">
					<div class="interest-card">
						<h3>Movies</h3>
						<p>I'm an avid film enthusiast and maintain a detailed log of my movie watching on Letterboxd.</p>
						<div class="recent-movies">
							{letterboxdData.recent_reviews.slice(0, 1).map((movie: MovieReview) => (
								<div class="movie-card">
									<img src={movie.image_url} alt={`Poster for ${movie.title}`} width="200" height="300" />
									<div class="movie-info">
										<h4>{movie.title} ({movie.year})</h4>
										<p class="rating">{getStarRating(movie.rating)}</p>
										<p class="watched-date">Watched on {movie.watched_date}</p>
										<div class="review" set:html={movie.review}></div>
										<a href={movie.link} target="_blank" rel="noopener noreferrer" class="movie-link">View on Letterboxd</a>
									</div>
								</div>
							))}
						</div>
						<div class="see-more-container">
							<button class="see-more-button">See more of my recent movies</button>
						</div>
						<div id="more-movies" class="more-movies hidden">
							{letterboxdData.recent_reviews.slice(1).map((movie: MovieReview) => (
								<div class="movie-card">
									<img src={movie.image_url} alt={`Poster for ${movie.title}`} width="200" height="300" />
									<div class="movie-info">
										<h4>{movie.title} ({movie.year})</h4>
										<p class="rating">{getStarRating(movie.rating)}</p>
										<p class="watched-date">Watched on {movie.watched_date}</p>
										<div class="review" set:html={movie.review}></div>
										<a href={movie.link} target="_blank" rel="noopener noreferrer" class="movie-link">View on Letterboxd</a>
									</div>
								</div>
							))}
						</div>
						<hr class="profile-separator" />
						<div class="profile-link-container">
							<a href="https://letterboxd.com/ncteisen/" target="_blank" rel="noopener noreferrer" class="profile-link">
								View my full Letterboxd profile
							</a>
						</div>
					</div>
				</div>
			</section>

			<footer>
				<p>© {new Date().getFullYear()} Noah Eisen. All rights reserved.</p>
			</footer>
		</main>
	</body>
</html>
